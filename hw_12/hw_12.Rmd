---
title: "Association rules"
subtitle: "Movie recommender systems"
author: "Mina Moosavifar - 93106788"
date: "`r Sys.time()`"
output:
  prettydoc::html_pretty:
    theme: cayman
    highlight: github
---

<div align="center">
<img  src="images/rs_cover.jpg"  align = 'center'>
</div>

> <p dir="RTL"> 
با استفاده از داده نظرهای فیلم به سوالات زیر پاسخ دهید.
</p>

***
<p dir="RTL">
بارگذاری داده ها و کتابخانه ها:
</p>

```{r, message=FALSE, warning=FALSE, comment=NA}
library(readr)
library(dplyr)
library(ggplot2)
library(highcharter)
library(stringr)

# Movies
movie = read_delim('data/ml-10M100K/movies.dat',delim = "::" ,col_names = c("MovieID",NA,"Title",NA,"Genres"))
movie = movie %>% select(1,3,5) 

# Tags
tag = read_delim('data/ml-10M100K/tags.dat',delim = "::" ,col_names = c("UserID",NA,"MovieID",NA,"Tag",NA,"Timestamp"))
tag = tag %>% select(1,3,5,7) 

# Ratings
rating = read_delim('data/ml-10M100K/ratings.dat',delim = "::" ,col_names = c("UserID",NA,"MovieID",NA,"Rating",NA,"Timestamp"))
rating = rating %>% select(1,3,5,7) 
```

```{r, message=FALSE, warning=FALSE, comment=NA}

```

<p dir="RTL">

</p>

***

<p dir="RTL">
۱. آماره های زیر را بیابید.
الف. محبوب ترین فیلم کدام است؟
ب. بیشترین نظرات درباره چه فیلمی داده شده است؟
پ. منفورترین فیلم کدام است؟
ت. تعداد فیلم های ساخته شده در هر سال
ث. در هر سالی مردم به چه ژانری علاقه مند بوده اند.
</p>

<p dir="RTL">

</p>

```{r, message=FALSE, warning=FALSE, comment=NA}

```


***

<p dir="RTL">
۲. ژانر فیلم ها را استخراج نمایید.  سپس آماره های زیر را استخراج نمایید.
الف. نمودار ستونی تعداد فیلم های هر ژانر
ب. نمودار همبستگی ژانرها
پ. متوسط امتیاز به هر ژانر
ت. دوران طلایی فیلم سازی 
</p>

<p dir="RTL">

</p>

```{r, message=FALSE, warning=FALSE, comment=NA}

```

***

<p dir="RTL">
۳. نمودار ابر لغات را بر حسب کلمات عنوان فیلم ها رسم نمایید.
</p>

<p dir="RTL">
برای حل این سوال ابتدا زیرمجموعه ای از داده ی 
movies
که تنها شامل عنوان فیلم هاست میگیریم. سپس نشانه گذاری ها را حذف کرده و عناوین را به کمک
space 
تقسیم می کنیم. سپس فرکانس هر لغت را بدست می یابیم. در نهایت داده های غلط از جمله 
stopwords 
و سال ها و پرانتزها را حذف می کنیم و تصویر را به صورت یک دوربین فیلم برداری می کشیم.
</p>

```{r, message=FALSE, warning=FALSE, comment=NA, eval=FALSE}
library(wordcloud2)
library(tidytext)

title_data <- movie %>% select(text = Title) %>% mutate(text = str_to_lower(text)) %>% 
  str_replace_all("\"","") %>% 
  str_replace("[[:punct:]]", "") %>% 
  str_split(pattern = "\\s") %>% 
  unlist() %>% as.data.frame(stringsAsFactors = F) %>% 
  filter( . != "")
  

title_data <- title_data %>% table() %>% 
  as.data.frame(stringsAsFactors = F)

colnames(title_data) = c("word","count")

title_data <- title_data %>%
  filter(!word %in% stop_words$word) %>% 
  filter(str_length(word)>1) %>% 
  filter(!str_detect(word,"\\d")) %>%
  filter(!str_detect(word,"\\(")) %>%
  filter(!str_detect(word,"[[:punct:]]")) %>% 
  arrange(desc(count)) %>% 
  filter(count > 4) %>% 
  select(word, freq = count)

wordcloud2(title_data , figPath = "images/movie-projector.png" , size = 0.9, color = "black")
```

<div align="center">
<img  src="images/A3.png"  align = 'center'>
</div>

***

<p dir="RTL">
۴. با استفاده از قوانین همبستگی یک توصیه گر برای فیلم ها بسازید. شبیه ترین فیلم ها به لیست زیر را پیدا کنید.
</p>

* Castle in the Sky (1986)
* Cast Away (2000)
* No Country for Old Men (2007)
* Memento (2000)

<p dir="RTL">

</p>

```{r, message=FALSE, warning=FALSE, comment=NA}

```

***

<p dir="RTL">
۵. تمرین سخت: در گیت هاب برای خود اکانت درست کنید. همه تمرین های خود را آنجا بارگذاری کنید! و لینک آن را ارسال نمایید.
</p>

***

<p dir="RTL">
۶. پنج انتقاد از درس و نحوه تدریس را بیان کنید.
</p>

***

<p dir="RTL">
۷. پنج پیشنهاد برای بهتر شدن درس بیان کنید.
</p>


***

<p dir="RTL">
۸. سه موضوع آماری جدید برای جایگزینی در سرفصل ها پیشنهاد دهید.
</p>

***

<p dir="RTL"> 
۹. سه داده جالب برای کار در کلاس پیشنهاد دهید.
</p>

***

<p dir="RTL"> 
۱۰. چهار نکته مهمی که در کلاس یاد گرفتید را بیان کنید.
</p>

